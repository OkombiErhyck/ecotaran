{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dobre\\\\OneDrive\\\\Desktop\\\\Erhyck\\\\Eco Taran\\\\my-app\\\\src\\\\UserContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext({});\nexport function UserContextProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [user, setUser] = useState(null);\n  const [ready, setReady] = useState(false);\n  const [cart, setCart] = useState([]);\n  const [cartQuantity, setCartQuantity] = useState(0);\n  useEffect(() => {\n    if (!user) {\n      axios.get('/profile').then(_ref2 => {\n        let {\n          data\n        } = _ref2;\n        setUser(data);\n        setReady(true);\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if (cart.length > 0) {\n      const totalQuantity = cart.reduce((total, item) => total + item.quantity, 0);\n      setCartQuantity(totalQuantity);\n    } else {\n      setCartQuantity(0);\n    }\n  }, [cart]);\n  const addToCart = (place, quantity) => {\n    const updatedPlace = {\n      ...place,\n      quantity: quantity || 1\n    };\n    const placeIndex = cart.findIndex(item => item._id === place._id);\n    if (placeIndex !== -1) {\n      const updatedCart = [...cart];\n      updatedCart[placeIndex].quantity += quantity;\n      setCart(updatedCart);\n    } else {\n      setCart([...cart, updatedPlace]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      setUser,\n      ready,\n      cart,\n      setCart,\n      cartQuantity,\n      addToCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(UserContextProvider, \"xfjLajrRMIUIJlUfgV4S4tDN76g=\");\n_c = UserContextProvider;\nvar _c;\n$RefreshReg$(_c, \"UserContextProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","useContext","axios","jsxDEV","_jsxDEV","UserContext","UserContextProvider","_ref","_s","children","user","setUser","ready","setReady","cart","setCart","cartQuantity","setCartQuantity","get","then","_ref2","data","length","totalQuantity","reduce","total","item","quantity","addToCart","place","updatedPlace","placeIndex","findIndex","_id","updatedCart","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/dobre/OneDrive/Desktop/Erhyck/Eco Taran/my-app/src/UserContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const UserContext = createContext({});\r\n\r\nexport function UserContextProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [ready, setReady] = useState(false);\r\n  const [cart, setCart] = useState([]);\r\n  const [cartQuantity, setCartQuantity] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      axios.get('/profile').then(({ data }) => {\r\n        setUser(data);\r\n        setReady(true);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (cart.length > 0) {\r\n      const totalQuantity = cart.reduce((total, item) => total + item.quantity, 0);\r\n      setCartQuantity(totalQuantity);\r\n    } else {\r\n      setCartQuantity(0);\r\n    }\r\n  }, [cart]);\r\n\r\n  const addToCart = (place, quantity) => {\r\n    const updatedPlace = { ...place, quantity: quantity || 1 };\r\n    const placeIndex = cart.findIndex((item) => item._id === place._id);\r\n\r\n    if (placeIndex !== -1) {\r\n      const updatedCart = [...cart];\r\n      updatedCart[placeIndex].quantity += quantity;\r\n      setCart(updatedCart);\r\n    } else {\r\n      setCart([...cart, updatedPlace]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, setUser, ready, cart, setCart, cartQuantity, addToCart }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,OAAO,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC,CAAC,CAAC;AAE5C,OAAO,SAASQ,mBAAmBA,CAAAC,IAAA,EAAe;EAAAC,EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC,GAAAF,IAAA;EAC9C,MAAM,CAACG,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM,CAACc,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACgB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,CAAC,CAAC;EAEnDD,SAAS,CAAC,MAAM;IACd,IAAI,CAACW,IAAI,EAAE;MACTR,KAAK,CAACgB,GAAG,CAAC,UAAU,CAAC,CAACC,IAAI,CAACC,KAAA,IAAc;QAAA,IAAb;UAAEC;QAAK,CAAC,GAAAD,KAAA;QAClCT,OAAO,CAACU,IAAI,CAAC;QACbR,QAAQ,CAAC,IAAI,CAAC;MAChB,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,EAAE,CAAC;EAENd,SAAS,CAAC,MAAM;IACd,IAAIe,IAAI,CAACQ,MAAM,GAAG,CAAC,EAAE;MACnB,MAAMC,aAAa,GAAGT,IAAI,CAACU,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,KAAKD,KAAK,GAAGC,IAAI,CAACC,QAAQ,EAAE,CAAC,CAAC;MAC5EV,eAAe,CAACM,aAAa,CAAC;IAChC,CAAC,MAAM;MACLN,eAAe,CAAC,CAAC,CAAC;IACpB;EACF,CAAC,EAAE,CAACH,IAAI,CAAC,CAAC;EAEV,MAAMc,SAAS,GAAGA,CAACC,KAAK,EAAEF,QAAQ,KAAK;IACrC,MAAMG,YAAY,GAAG;MAAE,GAAGD,KAAK;MAAEF,QAAQ,EAAEA,QAAQ,IAAI;IAAE,CAAC;IAC1D,MAAMI,UAAU,GAAGjB,IAAI,CAACkB,SAAS,CAAEN,IAAI,IAAKA,IAAI,CAACO,GAAG,KAAKJ,KAAK,CAACI,GAAG,CAAC;IAEnE,IAAIF,UAAU,KAAK,CAAC,CAAC,EAAE;MACrB,MAAMG,WAAW,GAAG,CAAC,GAAGpB,IAAI,CAAC;MAC7BoB,WAAW,CAACH,UAAU,CAAC,CAACJ,QAAQ,IAAIA,QAAQ;MAC5CZ,OAAO,CAACmB,WAAW,CAAC;IACtB,CAAC,MAAM;MACLnB,OAAO,CAAC,CAAC,GAAGD,IAAI,EAAEgB,YAAY,CAAC,CAAC;IAClC;EACF,CAAC;EAED,oBACE1B,OAAA,CAACC,WAAW,CAAC8B,QAAQ;IAACC,KAAK,EAAE;MAAE1B,IAAI;MAAEC,OAAO;MAAEC,KAAK;MAAEE,IAAI;MAAEC,OAAO;MAAEC,YAAY;MAAEY;IAAU,CAAE;IAAAnB,QAAA,EAC3FA;EAAQ;IAAA4B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACY;AAE3B;AAAChC,EAAA,CA1CeF,mBAAmB;AAAAmC,EAAA,GAAnBnC,mBAAmB;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}